{
    "version": "https://jsonfeed.org/version/1",
    "title": "Guto@Site",
    "description": "",
    "home_page_url": "https://gutocarvalho.net",
    "feed_url": "https://gutocarvalho.net/feed.json",
    "user_comment": "",
    "author": {
        "name": "Guto Carvalho"
    },
    "items": [
        {
            "id": "https://gutocarvalho.net/quando-eu-devo-cobrar-a-hora-de-projetos/",
            "url": "https://gutocarvalho.net/quando-eu-devo-cobrar-a-hora-de-projetos/",
            "title": "Quando eu devo cobrar a hora de projetos cloud?",
            "summary": "<p>Clique aqui para saber mais!</p>\n",
            "content_html": "<p>Clique aqui para saber mais!</p>\n\n<p>Eu sou Cloud Engineer ou Cloud Native Engineer, quanto deveria cobrar a hora de um projeto?</p>\n<p>Me fazem essa pergunta todos os dias, vamos ver se esse post consegue ajudar.</p>\n<p>Essa é uma questão complicada, depende de sua experiência e currículo.</p>\n<p>Mas se fosse para colocar uma <strong>base</strong>, seria parecido com isso.</p>\n<h2 id=\"toc_0\">Cloud Engineer (aws, gcp, azure)</h2>\n<ul>\n<li>Profissional com 2+ anos de EXP: R$ 120,00</li>\n<li>Profissional com 4+ anos de EXP: R$ 220,00</li>\n<li>Profissional com 6+ anos de EXP: R$ 320,00</li>\n</ul>\n<h2 id=\"toc_1\">Cloud Native Engineer + DevOps Experience (k8s+cicd+iac)</h2>\n<ul>\n<li>Profissional com 2+ anos de EXP: R$ 180,00</li>\n<li>Profissional com 4+ anos de EXP: R$ 280,00</li>\n<li>Profissional com 6+ anos de EXP: R$ 380,00</li>\n</ul>\n<h2 id=\"toc_2\">Quando é por hora e quando é projeto com valor fechado?</h2>\n<p>Passou de 40 horas você pode considerar um projeto \"porteira fechada\". Mas lembre-se, no seu cálculo pessoal, sua estimativa continua em horas, contudo você pode combinar um preço mais atrativo para fechar o projeto com o cliente e combinar um prazo adequado para entregar, com boa gordura.</p>\n<h2 id=\"toc_3\">Amarrando as pontas</h2>\n<p>Isso aí é o justo na minha humilde opinião, de resto dependerá muito do seu currículo, cases que participou, soft skills, hard skills, parta daí e combine o melhor que puder.</p>\n<p>Se o contratante faz questão do atendimento presencial, adicione pelo menos 25-30% na proposta para cobrir combustível (7 reais o litro), seu tempo no trânsito, comer fora, dentre outras questões.</p>\n<p>Se for em outra cidade, todas as despesas de deslocamento, hospedagem e alimentação são por conta do contratante, e mantenha o 25-30% de margem para atender presencial, mesmo assim.</p>\n<p>[s]<br>Guto</p>",
            "author": {
                "name": "Guto Carvalho"
            },
            "tags": [
            ],
            "date_published": "2022-01-06T18:34:46-03:00",
            "date_modified": "2022-01-06T22:32:17-03:00"
        },
        {
            "id": "https://gutocarvalho.net/quando-deveria-ganhar-um-cloud-engineer/",
            "url": "https://gutocarvalho.net/quando-deveria-ganhar-um-cloud-engineer/",
            "title": "Quando deveria ganhar um Cloud Engineer?",
            "summary": "<p>Clique aqui para saber mais!</p>\n",
            "content_html": "<p>Clique aqui para saber mais!</p>\n\n<p>Quanto deveria ganhar um DevOps Engineer ou Cloud Engineer?</p>\n<p>Me fazem essa pergunta todos os dias, vamos ver se esse post consegue ajudar.</p>\n<p>Essa é uma questão complicada, depende da experiência da pessoa e do currículo.</p>\n<p>Mas se fosse para colocar uma base, seria parecido com isso.</p>\n<h2 id=\"toc_0\">Cloud Engineer (aws, gcp, azure)</h2>\n<p>CLT</p>\n<ul>\n<li>Cloud Engineer Trainee, R$ 2.500,00 ( pegar para ensinar )</li>\n<li>Cloud Engineer 1, R$ 4.500,00 ( 2 anos de exp comprovada )</li>\n<li>Cloud Engineer 2, R$ 9.000,00 ( 4 anos de exp comprovada )</li>\n<li>Cloud Engineer 3, R$ 13.000,00 ( 6+ anos de exp comprovada )</li>\n</ul>\n<p>PJ (CLT*1,5)</p>\n<ul>\n<li>Cloud Engineer Trainee, R$ 3.500,00 ( pegar para ensinar )</li>\n<li>Cloud Engineer 1, R$ 6.750,00 ( 2 anos de exp comprovada )</li>\n<li>Cloud Engineer 2, R$ 13.500,00 ( 4 anos de exp comprovada )</li>\n<li>Cloud Engineer 3, R$ 19.500,00 ( 6+ anos de exp comprovada )</li>\n</ul>\n<h2 id=\"toc_1\">Cloud Native Engineer + DevOps Exp (k8s+cicd+iac)</h2>\n<p>CLT</p>\n<ul>\n<li>Cloud Native Engineer Trainee, R$ 2.500,00 ( pegar para ensinar )</li>\n<li>Cloud Native Engineer 1, R$ 5.000,00 ( 2 anos de exp comprovada )</li>\n<li>Cloud Native Engineer 2, R$ 10.000,00 ( 4 anos de exp comprovada )</li>\n<li>Cloud Native Engineer 3, R$ 15.000,00 ( 6+ anos de exp comprovada )</li>\n</ul>\n<p>PJ (CLT*1,5)</p>\n<ul>\n<li>Cloud Native Engineer Trainee, R$ 4.000,00 ( pegar para ensinar )</li>\n<li>Cloud Native Engineer 1, R$ 7.500,00 ( 2 anos de exp comprovada )</li>\n<li>Cloud Native Engineer 2, R$ 15.000,00 ( 4 anos de exp comprovada )</li>\n<li>Cloud Native Engineer 3, R$ 22.000,00 ( 6+ anos de exp comprovada )</li>\n</ul>\n<h2 id=\"toc_2\">Amarrando as pontas</h2>\n<p>Isso aí é o justo na minha humilde opinião, de resto dependerá muito do seu currículo, cases que participou, soft skills, hard skills, parta daí e combine o melhor que puder.</p>\n<p>O que você tem que entender e enxergar é o valor que você agrega ao projeto e ao cliente, sempre pense nisso.</p>\n<p>[s]<br>Guto</p>",
            "author": {
                "name": "Guto Carvalho"
            },
            "tags": [
            ],
            "date_published": "2022-01-06T18:04:26-03:00",
            "date_modified": "2022-01-06T22:29:41-03:00"
        },
        {
            "id": "https://gutocarvalho.net/ferramentas-interessantes-para-k8s/",
            "url": "https://gutocarvalho.net/ferramentas-interessantes-para-k8s/",
            "title": "Ferramentas interessantes para k8s",
            "summary": "<p>Conheça algumas ferramentas interessantes para seu k8s toolkit</p>\n",
            "content_html": "<p>Conheça algumas ferramentas interessantes para seu k8s toolkit</p>\n\n<p>Uma curadoria pessoal de ferramentas para k8s</p>\n<p>Essa página é atualizada regularmente, volte para ver as novidades!</p>\n<h2 id=\"toc_0\">shell</h2>\n<ul>\n<li>https://github.com/cloudnativelabs/kube-shell'</li>\n<li>https://github.com/jonmosco/kube-ps1</li>\n</ul>\n<h2 id=\"toc_1\">port forwarding</h2>\n<ul>\n<li>https://github.com/txn2/kubefwd</li>\n<li>https://www.electronjs.org/apps/kube-forwarder</li>\n</ul>\n<h2 id=\"toc_2\">autoscaling</h2>\n<ul>\n<li>https://github.com/aws/karpenter</li>\n<li>https://github.com/kedacore/keda</li>\n</ul>\n<h2 id=\"toc_3\">namespace and cluster switch (cli)</h2>\n<ul>\n<li>https://github.com/ahmetb/kubectx</li>\n<li>https://github.com/sbstp/kubie</li>\n</ul>\n<h2 id=\"toc_4\">kubeconfig manager</h2>\n<ul>\n<li>https://github.com/sunny0826/kubecm</li>\n<li>https://github.com/bitnami-labs/kubectl-import</li>\n</ul>\n<h2 id=\"toc_5\">resources view (web)</h2>\n<ul>\n<li>https://github.com/FairwindsOps/goldilocks</li>\n<li>https://github.com/stevelacy/kuberhaus</li>\n</ul>\n<h2 id=\"toc_6\">resources view realtime (cli)</h2>\n<ul>\n<li>https://github.com/pulumi/kubespy</li>\n</ul>\n<h2 id=\"toc_7\">backup for production (config and volumes)</h2>\n<ul>\n<li>https://velero.io</li>\n</ul>\n<h2 id=\"toc_8\">backup etcd</h2>\n<ul>\n<li>https://github.com/gardener/etcd-backup-restore</li>\n</ul>\n<h2 id=\"toc_9\">backup on git (yaml manifests)</h2>\n<ul>\n<li>https://github.com/bpineau/katafygio</li>\n</ul>\n<h2 id=\"toc_10\">etcd management</h2>\n<ul>\n<li>https://github.com/gtamas/etcdmanager</li>\n<li>https://github.com/kopeio/etcd-manager</li>\n</ul>\n<h2 id=\"toc_11\">logs (cli)</h2>\n<ul>\n<li>https://github.com/johanhaleby/kubetail</li>\n<li>https://github.com/boz/kail</li>\n<li>https://github.com/wercker/stern</li>\n</ul>\n<h2 id=\"toc_12\">monitoring (cli)</h2>\n<ul>\n<li>https://github.com/astefanutti/kubebox</li>\n</ul>\n<h2 id=\"toc_13\">monitoring (web)</h2>\n<ul>\n<li>https://github.com/hjacobs/kube-ops-view</li>\n</ul>\n<h2 id=\"toc_14\">monitoring tools</h2>\n<ul>\n<li>https://www.weave.works/oss/scope</li>\n<li>https://prometheus.io</li>\n<li>https://grafana.com/oss/grafana</li>\n</ul>\n<h2 id=\"toc_15\">monitoring tools for prometheus</h2>\n<ul>\n<li>https://github.com/cortexproject</li>\n<li>https://github.com/thanos-io/thanos</li>\n</ul>\n<h2 id=\"toc_16\">monitoring prometheus stack</h2>\n<ul>\n<li>https://github.com/prometheus-community/helm-charts/tree/main/charts/kube-prometheus-stack</li>\n</ul>\n<h2 id=\"toc_17\">log system</h2>\n<ul>\n<li>https://github.com/grafana/loki</li>\n<li>https://github.com/fluent/fluentd</li>\n</ul>\n<h2 id=\"toc_18\">cli dashboard</h2>\n<ul>\n<li>https://github.com/derailed/k9s</li>\n</ul>\n<h2 id=\"toc_19\">secrets</h2>\n<ul>\n<li>https://github.com/bitnami-labs/sealed-secrets</li>\n<li>https://github.com/Shopify/ejson</li>\n<li>https://github.com/mfuentesg/ksd</li>\n</ul>\n<h2 id=\"toc_20\">mobile dashboard</h2>\n<ul>\n<li>https://github.com/bitnami-labs/cabin</li>\n</ul>\n<h2 id=\"toc_21\">chaos test</h2>\n<ul>\n<li>https://github.com/asobti/kube-monkey</li>\n<li>https://github.com/linki/chaoskube</li>\n<li>https://github.com/powerfulseal/powerfulseal</li>\n</ul>\n<h2 id=\"toc_22\">load test</h2>\n<ul>\n<li>https://github.com/mrahbar/k8s-testsuite</li>\n<li>https://github.com/grafana/k6-operator</li>\n</ul>\n<h2 id=\"toc_23\">notifiers</h2>\n<ul>\n<li>https://github.com/bitnami-labs/kubewatch</li>\n<li>https://github.com/searchlight/searchlight</li>\n<li>https://github.com/sukeesh/k8s-job-notify</li>\n<li>https://github.com/infracloudio/botkube</li>\n</ul>\n<h2 id=\"toc_24\">web-cli</h2>\n<ul>\n<li>https://github.com/kubernetes-sigs/kui</li>\n</ul>\n<h2 id=\"toc_25\">desktop</h2>\n<ul>\n<li>https://github.com/lensapp/lens</li>\n<li>https://github.com/kubenav/kubenav</li>\n<li>https://github.com/skippbox/skippbox</li>\n</ul>\n<h2 id=\"toc_26\">linter &amp; validators</h2>\n<ul>\n<li>https://github.com/instrumenta/kubeval</li>\n<li>https://github.com/stackrox/kube-linter</li>\n<li>https://github.com/zegl/kube-score</li>\n<li>https://github.com/yannh/kubeconform</li>\n</ul>\n<h2 id=\"toc_27\">web dashboard</h2>\n<ul>\n<li>https://github.com/kubernetes/dashboard</li>\n<li>https://github.com/rancher/rancher</li>\n</ul>\n<h2 id=\"toc_28\">web dashboard (promissores)</h2>\n<ul>\n<li>https://github.com/kubevious/kubevious</li>\n<li>https://github.com/vmware-tanzu/octant</li>\n</ul>\n<h2 id=\"toc_29\">web dashboard (novos projetos para acompanhar)</h2>\n<ul>\n<li>https://github.com/skooner-k8s/skooner</li>\n<li>https://github.com/jeremykross/konstellate</li>\n<li>https://github.com/smpio/kubernator</li>\n</ul>\n<h2 id=\"toc_30\">ci/cd system</h2>\n<ul>\n<li>https://github.com/fluxcd/flux</li>\n<li>https://github.com/argoproj/argo-cd</li>\n<li>https://github.com/werf/werf</li>\n<li>https://github.com/tektoncd/operator</li>\n</ul>\n<h2 id=\"toc_31\">quality</h2>\n<ul>\n<li>https://github.com/keptn/keptn</li>\n</ul>\n<h2 id=\"toc_32\">ci/cd tool</h2>\n<ul>\n<li>https://githubhelp.com/alexcurtin/kubernetes-deploy</li>\n</ul>\n<h2 id=\"toc_33\">developer</h2>\n<ul>\n<li>https://github.com/tilt-dev/tilt</li>\n</ul>\n<h2 id=\"toc_34\">kubernetes local</h2>\n<ul>\n<li>https://github.com/rancher/k3d</li>\n<li>https://github.com/kubernetes/minikube</li>\n<li>https://github.com/kubernetes-sigs/kind</li>\n<li>https://github.com/ubuntu/microk8s</li>\n</ul>\n<h2 id=\"toc_35\">kubernetes installers</h2>\n<ul>\n<li>https://github.com/kubernetes/kops</li>\n<li>https://github.com/kubernetes-sigs/kubespray</li>\n<li>https://rancher.com/products/rke</li>\n</ul>\n<h2 id=\"toc_36\">kubernetes distros</h2>\n<ul>\n<li>https://rancher.com/products/rke</li>\n<li>https://github.com/kubernetes/kubeadm</li>\n</ul>\n<h2 id=\"toc_37\">kubernetes light distros</h2>\n<ul>\n<li>https://github.com/k3s-io/k3s</li>\n<li>https://github.com/k0sproject/k0s</li>\n</ul>\n<h2 id=\"toc_38\">security (cli)</h2>\n<ul>\n<li>https://github.com/aquasecurity/kube-bench</li>\n<li>https://github.com/aquasecurity/kube-hunter</li>\n<li>https://github.com/aquasecurity/kubectl-who-can</li>\n<li>https://github.com/aquasecurity/trivy</li>\n<li>https://github.com/armosec/kubescape</li>\n</ul>\n<h2 id=\"toc_39\">cluster sanitizer</h2>\n<ul>\n<li>https://github.com/FairwindsOps/Pluto</li>\n<li>https://github.com/derailed/popeye</li>\n</ul>\n<h2 id=\"toc_40\">service proxy</h2>\n<ul>\n<li>https://github.com/envoyproxy/envoy</li>\n<li>https://github.com/projectcontour/contour</li>\n<li>https://github.com/traefik/traefik</li>\n<li>https://github.com/nginx/nginx</li>\n</ul>\n<h2 id=\"toc_41\">storage (block)</h2>\n<ul>\n<li>https://github.com/longhorn/longhorn</li>\n<li>https://github.com/openebs/openebs</li>\n</ul>\n<h2 id=\"toc_42\">storage (object)</h2>\n<ul>\n<li>https://github.com/minio/minio</li>\n</ul>\n<h2 id=\"toc_43\">service mesh</h2>\n<ul>\n<li>https://github.com/linkerd/linkerd2</li>\n<li>https://github.com/istio/istio</li>\n<li>https://github.com/hashicorp/consul</li>\n</ul>\n<h2 id=\"toc_44\">packages</h2>\n<ul>\n<li>https://github.com/helm/helm</li>\n<li>https://github.com/kubernetes-sigs/kustomize/</li>\n<li>https://github.com/buildpacks/pack</li>\n</ul>\n<h2 id=\"toc_45\">container register</h2>\n<ul>\n<li>https://github.com/goharbor/harbor</li>\n<li>https://github.com/quay/quay</li>\n</ul>\n<h2 id=\"toc_46\">database</h2>\n<ul>\n<li>https://github.com/ongres/stackgres</li>\n<li>https://github.com/CrunchyData/postgres-operator</li>\n<li>https://github.com/vitessio/vitess</li>\n</ul>\n<h2 id=\"toc_47\">api gateway</h2>\n<ul>\n<li>https://github.com/emissary-ingress/emissary</li>\n<li>https://github.com/Kong/kong</li>\n</ul>\n<h2 id=\"toc_48\">kubernetes history dashboard</h2>\n<ul>\n<li>https://github.com/salesforce/sloop</li>\n</ul>\n<h2 id=\"toc_49\">troubleshooting</h2>\n<ul>\n<li>https://github.com/aylei/kubectl-debug</li>\n</ul>\n<h2 id=\"toc_50\">tracing and telemetry</h2>\n<ul>\n<li>https://github.com/jaegertracing/jaeger</li>\n<li>https://github.com/open-telemetry</li>\n<li>https://github.com/opentracing</li>\n<li>https://grafana.com/oss/tempo</li>\n</ul>\n<h2 id=\"toc_51\">serverless</h2>\n<ul>\n<li>https://github.com/kubeless/kubeless</li>\n<li>https://github.com/funktionio/funktion</li>\n<li>https://github.com/fission</li>\n<li>https://github.com/openfaas/faas</li>\n</ul>",
            "author": {
                "name": "Guto Carvalho"
            },
            "tags": [
                   "MindNotes",
                   "K8S"
            ],
            "date_published": "2022-01-06T14:33:43-03:00",
            "date_modified": "2022-01-06T17:53:42-03:00"
        },
        {
            "id": "https://gutocarvalho.net/verificando-quando-uma-branch-foi-criada/",
            "url": "https://gutocarvalho.net/verificando-quando-uma-branch-foi-criada/",
            "title": "Verificando quando uma branch foi criada!",
            "summary": "<p>Nota mental para verificar a idade e o autor de uma branch.</p>\n",
            "content_html": "<p>Nota mental para verificar a idade e o autor de uma branch.</p>\n\n<h2 id=\"toc_0\">Checando quando uma branch foi criada</h2>\n<p>Para verificar quando uma branch foi criada</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ git for-each-ref --sort=authordate --format '%(authordate:iso) %(align:left,25)%(refname:short)%(end) %(subject)' refs/heads</code></pre>\n</div>\n<p>exemplo saída</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">2021-11-18 09:54:39 -0500 production                Added bugsnag configuration\n2022-01-05 14:35:47 -0300 dockerize                 Added shipit production config</code></pre>\n</div>\n<h2 id=\"toc_1\">Checando quem criou cada branch</h2>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ git for-each-ref --format='%(color:cyan)[data] %(authordate:format:%m/%d/%Y %I:%M %p) %(color:green) [branch] %(refname:short) %(align:25,left)%(color:yellow)[author] %(authorname)%(end) %(color:reset)%(refname:strip=3)' --sort=authordate refs/heads</code></pre>\n</div>\n<p>exemplo de saída</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">[data] 11/18/2021 09:54 AM  [branch] production [author] Jose Augusto\n[data] 01/05/2022 02:35 PM  [branch] dockerize [author] Guto Carvalho</code></pre>\n</div>\n<p>Este post é do tipo #MindNotes, entenda <a href=\"https://gutocarvalho.net/o-que-sao-mindnotes/\">aqui</a>.</p>\n<h2 id=\"toc_2\">References</h2>\n<ul>\n<li>https://www.code-helper.com/answers/check-age-of-git-branch</li>\n</ul>\n<p>[s]<br>Guto</p>",
            "author": {
                "name": "Guto Carvalho"
            },
            "tags": [
                   "MindNotes"
            ],
            "date_published": "2022-01-06T11:26:28-03:00",
            "date_modified": "2022-01-06T15:49:05-03:00"
        },
        {
            "id": "https://gutocarvalho.net/o-que-sao-tldrs/",
            "url": "https://gutocarvalho.net/o-que-sao-tldrs/",
            "title": "O que são TLDR&#x27;s ?",
            "summary": "TLDR significa \"Too Long Don't Read\", é uma expressão é inglês para&hellip;",
            "content_html": "<p>TLDR significa \"Too Long Don't Read\", é uma expressão é inglês para o termo brazuca <strong>textão</strong>.</p>\n<p>Alguns temas aqui são TLDR, geralmente pois o assunto demanda muito texto para explicar um conceito, modelo ou tecnologia.<br><br>Então já sabe, se o post é TLDR pega a água e um lanchinho e vem!</p>\n<p><br>:)</p>",
            "author": {
                "name": "Guto Carvalho"
            },
            "tags": [
            ],
            "date_published": "2022-01-06T10:49:31-03:00",
            "date_modified": "2022-01-06T11:01:53-03:00"
        },
        {
            "id": "https://gutocarvalho.net/o-que-sao-mindnotes/",
            "url": "https://gutocarvalho.net/o-que-sao-mindnotes/",
            "title": "O que são #MindNotes ?",
            "summary": "Mindnotes, como o nome diz são notas mentais rápidas de algo que&hellip;",
            "content_html": "<p><strong>Mindnotes,</strong> como o nome diz são notas mentais rápidas de algo que eu preciso estudar, pesquisar, entender ou lembrar. <br><br>Pode ser um post de uma linha, de um link, ou até um parágrafo, rápido e direto!<br><br>Normalmente vira um <a href=\"https://gutocarvalho.net/o-que-sao-drops/\">DROPS</a> ou um <a href=\"https://gutocarvalho.net/o-que-sao-tldrs/\">TLDR</a> no futuro.<br><br>[s]<br>Guto</p>",
            "author": {
                "name": "Guto Carvalho"
            },
            "tags": [
            ],
            "date_published": "2022-01-06T10:46:39-03:00",
            "date_modified": "2022-01-06T11:01:51-03:00"
        },
        {
            "id": "https://gutocarvalho.net/o-que-sao-drops/",
            "url": "https://gutocarvalho.net/o-que-sao-drops/",
            "title": "O que são #Drops?",
            "summary": "São DUMPs mentais rápidos e rasteiros, simples e objetivos – que funcionam.",
            "content_html": "<p>São DUMPs mentais rápidos e rasteiros, simples e objetivos – que funcionam. <br><br>Geralmente de algo que eu acabei de fazer.<br><br>Eu – quase sempre – volto para detalhar mais cada passo.<br><br>Considere com a mesma qualidade de um rascunho ou uma anotação rápida.<br><br>De qualquer forma comenta ai qquer coisa, os comentários estão ligados nos DROPS ;)<br><br>[s]<br>Guto</p>",
            "author": {
                "name": "Guto Carvalho"
            },
            "tags": [
            ],
            "date_published": "2022-01-06T10:42:40-03:00",
            "date_modified": "2022-01-06T10:46:48-03:00"
        },
        {
            "id": "https://gutocarvalho.net/organizando-e-tornando-o-kubeconfig-interativo/",
            "url": "https://gutocarvalho.net/organizando-e-tornando-o-kubeconfig-interativo/",
            "title": "Organizando e tornando o kubeconfig interativo!",
            "summary": "<p>Aprenda a organizar seu kubeconfig!</p>\n",
            "content_html": "<p>Aprenda a organizar seu kubeconfig!</p>\n\n<p>Qual a melhor forma de organizar múltiplos clientes e projetos para administrar seus clusters?</p>\n<p>Sabemos que o kubectl precisa de um kubeconfig para funcionar, podemos apontar diretamente e executar algo</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectl --kubeconfig=arquivo_de_config get nodes</code></pre>\n</div>\n<p>Podemos usar também a variável kubeconfig</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ export KUBECONFIG=/caminho/para/arquivo/config\n$ kubect get nodes</code></pre>\n</div>\n<p>E como eu faço para dar conta de gerenciar dezenas de projetos e clientes?</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">Eu uso o kubectx + kubens + fzf + kubectl-import, falaremos disso a frente :)</code></pre>\n</div>\n<p>Primeira coisa que você tem que pensar é que um único arquivo de kubeconfig é suficiente para todos os seus projetos, inclusive o arquivo foi pensado para ter diferentes contextos.</p>\n<p>Primeiro vamos entender como funciona esse arquivo e seus contextos.</p>\n<h3 id=\"toc_0\">Entendendo contextos</h3>\n<p>Veja um exemplo simples de arquivo de configuração do kubectl com diferentes contextos</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">apiVersion: v1\nkind: Config\npreferences: {}\n\nclusters:\n- cluster:\n  name: prd\n- cluster:\n  name: dev\n- cluster:\n  name: tst\n- cluster:\n\n  \nusers:\n- name: engineers\n- name: developers\n- name: testers\n\ncontexts:\n- context:\n  name: production-cluster\n    user: name\n    cluster: prd\n- context:\n  name: dev-cluster\n    user: name\n    cluster: dev\n- context:\n  name: test-cluster\n    user: name\n    cluster: tst</code></pre>\n</div>\n<p>Agora vamos aprender a criar esse arquivo passo a passo.</p>\n<h3 id=\"toc_1\">Adicionando clusters</h3>\n<p>Adicionando cluster <strong>prd</strong> com certificado CA</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\"> $ kubectl config --kubeconfig=config set-cluster projeto-prd --server=https://192.168.222.80 --certificate-authority=prd-cert-file</code></pre>\n</div>\n<p>Adicionando cluster <strong>dev</strong> com certificado CA</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\"> $ kubectl config --kubeconfig=config set-cluster projeto-dev --server=https://172.16.31.20 --certificate-authority=dev-cert-file</code></pre>\n</div>\n<p>Adicionando cluster <strong>tst</strong> e ignorando o certificado</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\"> $ kubectl config --kubeconfig=config set-cluster projeto-tst --server=https://10.200.3.90 --certificate-authority=tst-ca-file</code></pre>\n</div>\n<h3 id=\"toc_2\">Adicionando usuários</h3>\n<p>Adicionando usuário para engenheiros com certificado</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectl config --kubeconfig=config set-credentials engineers --client-certificate=eng-cert-file --client-key=eng-key-file</code></pre>\n</div>\n<p>Adicionando usuário para desenvolvedores com certificado</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectl config --kubeconfig=config set-credentials developers --client-certificate=dev-cert-file --client-key=dev-key-file</code></pre>\n</div>\n<p>Adicionando usuário para testadores com user/senha</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectl config --kubeconfig=config set-credentials testers --username=admin --password=password</code></pre>\n</div>\n<h3 id=\"toc_3\">Adicionando contextos</h3>\n<p>Adicionando contexto para cluster de <strong>produção</strong> com usuário engineers</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectl config --kubeconfig=config set-context cluster-projeto-prd --cluster=projeto-prd --user=engineers</code></pre>\n</div>\n<p>Adicionando contexto para cluster de <strong>desenvolvimento</strong> com usuário developer</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectl config --kubeconfig=config set-context cluster-projeto-dev --cluster=projeto-dev --user=developers</code></pre>\n</div>\n<p>Adicionando contexto para cluster de <strong>teste</strong> com usuário testers</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectl config --kubeconfig=config set-context cluster-projeto-tst --cluster=projeto-tst --user=testers</code></pre>\n</div>\n<h3 id=\"toc_4\">Verificando arquivo</h3>\n<p>Leia o arquivo</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ cat config</code></pre>\n</div>\n<p>Agora você provavelmente tem um arquivo como esse, acredito que a única diferença para o seu é que eu coloquei o kind e preferences no topo.</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">apiVersion: v1\nkind: Config\npreferences: {}\nclusters:\n- cluster:\n    certificate-authority: dev-cert-file\n    server: https://172.16.31.20\n  name: projeto-dev\n- cluster:\n    certificate-authority: prd-cert-file\n    server: https://192.168.222.80\n  name: projeto-prd\n- cluster:\n    certificate-authority: tst-ca-file\n    server: https://10.200.3.90\n  name: projeto-tst\ncontexts:\n- context:\n    cluster: projeto-dev\n    user: developers\n  name: cluster-projeto-dev\n- context:\n    cluster: projeto-prd\n    user: engineers\n  name: cluster-projeto-prd\n- context:\n    cluster: projeto-tst\n    user: testers\n  name: cluster-projeto-tst\ncurrent-context: \"\"\nusers:\n- name: developers\n  user:\n    client-certificate: dev-cert-file\n    client-key: dev-key-file\n- name: engineers\n  user:\n    client-certificate: eng-cert-file\n    client-key: eng-key-file\n- name: testers\n  user:\n    password: password\n    username: admin</code></pre>\n</div>\n<p>Agora que os contextos foram configurados, podemos mudar de contexto assim.</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectl config --kubeconfig=config use-context cluster-projeto-prd</code></pre>\n</div>\n<p>E a partir daí qualquer comando do kubectl será realizado no cluster configurado nesse contexto.</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubeclt --kubeconfig=config get nodes</code></pre>\n</div>\n<p>Exemplo de saída</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">k8s-prd-ctl-01      Ready    controlplane,etcd   6d1h   v1.21.7\nk8s-prd-ctl-02      Ready    controlplane,etcd   6d1h   v1.21.7\nk8s-prd-ctl-03      Ready    controlplane,etcd   6d1h   v1.21.7\nk8s-prd-ctl-04      Ready    controlplane,etcd   6d1h   v1.21.7\nk8s-prd-ctl-05      Ready    controlplane,etcd   6d1h   v1.21.7\nk8s-prd-worker-01   Ready    worker              6d1h   v1.21.7\nk8s-prd-worker-02   Ready    worker              6d1h   v1.21.7\nk8s-prd-worker-03   Ready    worker              6d1h   v1.21.7\nk8s-prd-worker-04   Ready    worker              6d1h   v1.21.7</code></pre>\n</div>\n<h3 id=\"toc_5\">Verificando a configuração do kubectl</h3>\n<p>Com o comando abaixo você verá a configuração completa</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectl config --kubeconfig=config view</code></pre>\n</div>\n<h3 id=\"toc_6\">Verificando apenas do contexto que está configurado</h3>\n<p>É preciso usar o parâmetro minify para limitar ao contexto escolhido</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectl config --kubeconfig=config view --minify</code></pre>\n</div>\n<p>Saída</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">apiVersion: v1\nclusters:\n- cluster:\n    certificate-authority: prd-cert-file\n    server: https://192.168.222.80\n  name: projeto-prd\ncontexts:\n- context:\n    cluster: projeto-prd\n    user: engineers\n  name: cluster-projeto-prd\ncurrent-context: cluster-projeto-prd\nkind: Config\npreferences: {}\nusers:\n- name: engineers\n  user:\n    client-certificate: eng-cert-file\n    client-key: eng-key-file</code></pre>\n</div>\n<p>Observe a linha</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">current-context: cluster-projeto-prd</code></pre>\n</div>\n<p>Sempre que alteramos de contexto essa linha será modificado no seu arquivo de configuração.</p>\n<h3 id=\"toc_7\">Existe algo mais prático para visualizar e trocar de contextos?</h3>\n<p>Sim, existe o projeto kubectx</p>\n<ul>\n<li>https://github.com/ahmetb/kubectx</li>\n</ul>\n<p>Instalando via brew</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ brew install kubectx</code></pre>\n</div>\n<p>Rodando</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectx</code></pre>\n</div>\n<p>Ele vai te mostrar os contextos disponíveis</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">cluster-projeto-prd\ncluster-projeto-dev\ncluster-projeto-tst</code></pre>\n</div>\n<p>Para escolher o contexto basta digitar</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectx cluster-projeto-prd</code></pre>\n</div>\n<p>E pronto!</p>\n<h3 id=\"toc_8\">Existe algo ainda mais fácil?</h3>\n<p>Sim, você pode utilizar o projeto fzf</p>\n<ul>\n<li>https://github.com/junegunn/fzf</li>\n</ul>\n<p>Instalando via brew</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ brew install fzf</code></pre>\n</div>\n<p>Com ele o kubectx fica interativo, abre um menu e você seleciona o contexto.</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectx</code></pre>\n</div>\n<p>Saída</p>\n<p>\n<script id=\"asciicast-NC0R8SqNRzcjpJl0j5B1iB7Ja\" src=\"https://asciinema.org/a/NC0R8SqNRzcjpJl0j5B1iB7Ja.js\" async=\"\"></script>\n</p>\n<h3 id=\"toc_9\">Consigo importar um kubeconfig?</h3>\n<p>Eu sei que ficar editando isso na mão dá um certo trabalho, mas tem solução. Recentemente eu encontrei o projeto kubectl-import para resolver essa questão.</p>\n<ul>\n<li>https://github.com/bitnami-labs/kubectl-import</li>\n</ul>\n<p>Instalando o projeto</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\"> $ sudo curl -o kubectl-import https://raw.githubusercontent.com/bitnami-labs/kubectl-import/master/kubectl-import &amp;&amp; chmod 0755 kubectl-import</code></pre>\n</div>\n<p>Com ele você consegue pegar um kubeconfig e importar</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\"> $ export KUBECONFIG=/caminho/pro/seu/kubeconfig\n $ ./kubectl-import kubeconfig-novo</code></pre>\n</div>\n<p>E pronto, o novo cluster/contexto vai aparecer no seu kubectx. Recomendo editar o arquivo antes de importar, setando corretamente os nomes do cluster, user e contexto.</p>\n<h3 id=\"toc_10\">Tem algo parecido como kubectx só que para namespaces?</h3>\n<p>Tem sim, o projeto kubectx traz junto o kubens, aplicativo similar que serve para trocar de namespaces rapidamente de forma interativa, basta digitar</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubens</code></pre>\n</div>\n<p>E escolher o namespace.</p>\n<h2 id=\"toc_10\">Amarrando as pontas</h2>\n<p>Espero que tenha aprendido a usar contextos do kubeconf, usar o kubectx, fzf, kubectl-import e agilizar a administração de seus clusters.<br><br>Esse post é o que eu chamo de DROPS, entenda o modelo <a href=\"https://gutocarvalho.net/o-que-sao-drops/\">aqui</a>.</p>\n<p>[s]<br>Guto</p>",
            "author": {
                "name": "Guto Carvalho"
            },
            "tags": [
                   "Projetos",
                   "K8S",
                   "Drops"
            ],
            "date_published": "2022-01-06T10:14:57-03:00",
            "date_modified": "2022-01-06T10:56:36-03:00"
        },
        {
            "id": "https://gutocarvalho.net/sistemas-de-comentarios-open-source/",
            "url": "https://gutocarvalho.net/sistemas-de-comentarios-open-source/",
            "title": "Sistemas de comentários open source",
            "summary": "<p>Eu uso o DISQUS, mas estou buscando alternativas open source!</p>\n",
            "content_html": "<p>Eu uso o DISQUS, mas estou buscando alternativas open source!</p>\n\n<p>Veja alguns sistemas de comentários open source interessantes</p>\n<p><a href=\"https://commento.io/\">https://commento.io/</a></p>\n<p><a href=\"https://remark42.com/\">https://remark42.com/</a></p>\n<p><a href=\"https://posativ.org/isso/\">https://posativ.org/isso/</a></p>\n<p><a href=\"https://github.com/phusion/juvia\">https://github.com/phusion/juvia</a></p>\n<p><a href=\"https://github.com/jacobwb/hashover\">https://github.com/jacobwb/hashover</a></p>\n<p><a href=\"https://github.com/schn4ck/schnack\">https://github.com/schn4ck/schnack</a></p>\n<p><a href=\"https://github.com/xCss/Valine\">https://github.com/xCss/Valine</a><br><br><a href=\"https://github.com/commentics/commentics\">https://github.com/commentics/commentics</a><br><br><a href=\"https://github.com/vkuznecovas/mouthful\">https://github.com/vkuznecovas/mouthful</a><br><br><a href=\"https://cusdis.com/\">https://cusdis.com/</a><br><br><a href=\"https://github.com/gitalk/gitalk\">https://github.com/gitalk/gitalk</a></p>\n<p>References</p>\n<p>- <a href=\"https://ourcodeworld.com/articles/read/1265/top-7-best-open-source-self-hosted-comment-system-alternatives-to-disqus\">https://ourcodeworld.com/articles/read/1265/top-7-best-open-source-self-hosted-comment-system-alternatives-to-disqus</a><br>- <a href=\"https://lisakov.com/projects/open-source-comments/\">https://lisakov.com/projects/open-source-comments/</a><br>- <a href=\"https://www.findbestopensource.com/tagged/commenting-engine\">https://www.findbestopensource.com/tagged/commenting-engine</a><br>- <a href=\"https://nestify.io/blog/11-best-disqus-alternatives-you-should-try\">https://nestify.io/blog/11-best-disqus-alternatives-you-should-try</a></p>\n<p>[s]<br>Guto</p>",
            "author": {
                "name": "Guto Carvalho"
            },
            "tags": [
                   "MindNotes"
            ],
            "date_published": "2022-01-05T18:13:17-03:00",
            "date_modified": "2022-01-05T18:21:16-03:00"
        },
        {
            "id": "https://gutocarvalho.net/usando-o-kubetail-para-ver-logs-no-k8s/",
            "url": "https://gutocarvalho.net/usando-o-kubetail-para-ver-logs-no-k8s/",
            "title": "Usando o kubetail para ver logs no K8S",
            "summary": "As vezes queremos ver os logs de todos os pods de um&hellip;",
            "content_html": "<p>As vezes queremos ver os logs de todos os pods de um mesmo namespace, usando apenas o kubectl essa tarefa pode ser difícil, para isso podemos recorrer a ferramentas externas como o kubetail</p>\n<p>Instalando via homebrew</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ brew tap johanhaleby/kubetail &amp;&amp; brew install kubetail</code></pre>\n</div>\n<p>Procurando por pods em um namespace</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubectl get pods -n project</code></pre>\n</div>\n<p>Saída</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">NAME                   READY     STATUS    RESTARTS   AGE\napi-backend-v1-aba8y   1/1       Running   0          1d\napi-backend-v1-gc4st   1/1       Running   0          1d\napi-backend-v1-m8acl   1/1       Running   0          6d\napi-frontend-v31-s20d0 1/1       Running   0          1d\napi-frontend-v31-9pbpn 1/1       Running   0          1d\napi-frontend-v31-q74wg 1/1       Running   0          1d\ndatabase-v5-0fa8o      1/1       Running   0          3h\ndatabase-v5-yhren      1/1       Running   0          2h</code></pre>\n</div>\n<p>Fazendo tail nos logs dos pods api-backend</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubetail api-backend -n project</code></pre>\n</div>\n<p>Fazendo tail nos logs do primeiro container nos pods api-backend</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubetail api-backend -c container1 -n project</code></pre>\n</div>\n<p>Fazendo tail nos logs do container 1 e 2 dos pods api-backend</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubetail api-backend -c container1 -c container2 -n project</code></pre>\n</div>\n<p>Fazendo tail dos logs dos pods api-backend e api-frontend</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubetail api-backend,api-frontend -n project</code></pre>\n</div>\n<p>Fazendo tail no que casar com a expressão regular abaixo</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubetail \"^api|.*database.*\" --regex -n project</code></pre>\n</div>\n<p>Fazendo tail dos logs de todos os pods do namesapce project</p>\n<div>\n<pre class=\" language-none\"><code class=\" language-none\">$ kubetail -n project</code></pre>\n</div>\n<h2 id=\"toc_0\">References</h2>\n<ul>\n<li>https://github.com/johanhaleby/kubetail</li>\n</ul>",
            "author": {
                "name": "Guto Carvalho"
            },
            "tags": [
                   "K8S",
                   "Drops"
            ],
            "date_published": "2022-01-05T17:22:27-03:00",
            "date_modified": "2022-01-06T10:22:41-03:00"
        }
    ]
}
